(()=>{"use strict";chrome.runtime.onMessage.addListener((async(e,t,a)=>{if("popup"===e.type){await(async e=>{const t=await(async(e,t)=>{try{const t=await fetch(`http://127.0.0.1:7001/${e}`,void 0),a=await t.json();return 200!==a.code?(console.log("some error in server"),Promise.reject(a)):a.data}catch(e){return console.log(e),Promise.reject(e)}})(`task/getTask?token=${e}`);await(async e=>{await chrome.storage.local.set(e)})({projectInfo:t})})(e.data);let t=await(async e=>await chrome.storage.local.get(["projectInfo"]))();t=t.projectInfo,console.log(t),"newTab"===t[0].id&&await chrome.tabs.create({url:t[0].openTab}),setTimeout((async()=>{let[e]=await chrome.tabs.query({active:!0});await chrome.scripting.executeScript({target:{tabId:e.id},files:["content.js"]},(()=>{console.log("注入脚本成功")}))}),3e3)}"content"===e.type&&console.log(e.data)}))})();